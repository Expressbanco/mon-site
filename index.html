<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>PICHINCHA - 3D PRO SECURE</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@700&family=Inter:wght@300;400;700;900&display=swap');
        
        body { 
            margin: 0; 
            background: #000; 
            color: white; 
            font-family: 'Inter', sans-serif; 
            overflow: hidden; 
            touch-action: manipulation;
        }

        #canvas-container { position: fixed; inset: 0; z-index: 0; }

        .gold-text {
            background: linear-gradient(135deg, #bf953f, #fcf6ba, #b38728);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            font-family: 'Orbitron', sans-serif;
        }

        .glass-card {
            background: rgba(10, 10, 10, 0.9);
            backdrop-filter: blur(15px);
            border: 1px solid rgba(191, 149, 63, 0.3);
            border-radius: 20px;
            width: 90%;
            max-width: 400px;
        }

        .loader-3d {
            width: 40px; height: 40px;
            border: 3px solid #bf953f;
            border-top: 3px solid transparent;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        @keyframes spin { 100% { transform: rotate(360deg); } }

        .fade-in { animation: fadeIn 0.5s ease-out forwards; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body>

    <div id="canvas-container"></div>

    <header class="fixed top-0 w-full p-5 z-50 flex justify-between items-center">
        <h1 class="text-lg font-black text-yellow-500 italic">PICHINCHA</h1>
        <nav class="flex gap-4 text-[9px] font-bold uppercase tracking-widest text-yellow-600">
            <button onclick="openModal('about')">Nosotros</button>
            <button onclick="openModal('port')">Cartera</button>
            <button onclick="openModal('contact')">Contacto</button>
        </nav>
    </header>

    <section id="step1" class="relative z-10 h-screen flex flex-col items-center justify-center p-6">
        <div class="text-center w-full max-w-xs">
            <div class="mb-6 p-4 bg-red-950/30 border border-red-500/30 rounded-lg">
                <p class="text-[9px] text-red-500 font-bold mb-1 uppercase tracking-tighter text-center">üõ°Ô∏è Protocolo Antifraude</p>
                <p class="text-[8px] text-gray-400">Banco Pichincha protege sus fondos. Cualquier intento de estafa ser√° detectado y reportado de inmediato.</p>
            </div>
            <input type="password" id="adminCode" inputmode="numeric" maxlength="4" placeholder="C√ìDIGO ADMIN" 
                class="bg-transparent border-b border-yellow-700 text-center text-4xl text-yellow-500 outline-none w-full tracking-[0.3em] pb-2">
            
            <div id="loader4s" class="hidden mt-8 flex flex-col items-center">
                <div class="loader-3d mb-3"></div>
                <p class="text-[8px] text-yellow-600 tracking-[0.4em] animate-pulse uppercase text-center">Encriptaci√≥n Segura (4s)...</p>
            </div>
        </div>
    </section>

    <section id="step2" class="hidden relative z-10 h-screen flex items-center justify-center">
        <div class="glass-card p-6 shadow-2xl fade-in">
            <h2 class="text-yellow-500 text-[10px] font-bold tracking-widest mb-6 uppercase border-b border-yellow-900/30 pb-2">Transferencia Internacional</h2>
            
            <div class="space-y-4">
                <div>
                    <p class="text-[8px] text-gray-500 uppercase">Beneficiario</p>
                    <p class="text-sm font-bold truncate">HENIDTT XIMENA COSTALES PALTAN</p>
                </div>
                <div class="flex justify-between">
                    <div><p class="text-[8px] text-gray-500 uppercase">Cuenta CTE</p><p class="text-xs">3373167204</p></div>
                    <div class="text-right"><p class="text-[8px] text-gray-500 uppercase">ID Banco</p><p class="text-xs">2211435131</p></div>
                </div>
                <div class="py-4 text-center">
                    <p class="text-4xl font-black gold-text italic">$ 13,500.00</p>
                </div>
            </div>

            <div class="mt-4">
                <div class="h-[2px] w-full bg-gray-900">
                    <div id="prog-bar" class="h-full bg-yellow-500 w-0 shadow-[0_0_10px_#bf953f]"></div>
                </div>
                <p id="prog-text" class="text-[8px] text-center mt-2 text-yellow-700 tracking-widest uppercase text-center">Transmitiendo : 0%</p>
            </div>
        </div>
    </section>

    <section id="step3" class="hidden relative z-10 h-screen flex items-center justify-center p-4">
        <div class="glass-card p-6 text-center border-t-4 border-yellow-600 fade-in">
            <div class="loader-3d mx-auto mb-4"></div>
            <h2 class="text-white text-sm font-black mb-1 tracking-widest uppercase text-center">Transferencia Pendiente (24H)</h2>
            <p class="text-[8px] text-yellow-500/60 uppercase mb-6 text-center">Protocolo de Liberaci√≥n de Fondos</p>
            
            <div class="bg-white/5 p-4 rounded-lg mb-6">
                <div class="flex justify-between mb-2">
                    <span class="text-[9px] text-gray-400 uppercase">Saldo Bloqueado</span>
                    <span class="text-sm font-bold">$ 13,500.00</span>
                </div>
                <div class="flex justify-between border-t border-white/5 pt-2">
                    <span class="text-[9px] text-red-500 uppercase font-bold">Costo de Liberaci√≥n</span>
                    <span class="text-sm font-bold text-red-500">$ 200.00</span>
                </div>
            </div>

            <div class="text-[8px] text-left text-gray-500 space-y-1 mb-6 uppercase">
                <p>Cliente : XIMENA COSTALES PALTAN</p>
                <p>Fecha : <span id="fDate"></span> | <span id="fTime"></span></p>
            </div>

            <button onclick="generatePDF()" class="w-full py-4 bg-yellow-600 text-black font-black text-[10px] uppercase tracking-widest rounded active:bg-yellow-400 shadow-lg">
                Descargar Comprobante PDF
            </button>
        </div>
    </section>

    <div id="modal" class="hidden fixed inset-0 z-[100] bg-black/98 flex items-center justify-center p-8">
        <div class="text-center max-w-xs">
            <div id="modalContent" class="text-[11px] text-gray-400 leading-relaxed uppercase tracking-tighter"></div>
            <button onclick="closeModal()" class="mt-8 text-yellow-500 border border-yellow-500 px-6 py-2 text-[9px] uppercase tracking-widest">Cerrar</button>
        </div>
    </div>

    <script>
        // --- 1. MOTOR 3D ---
        let scene, camera, renderer, coins = [];
        function init3D() {
            scene = new THREE.Scene();
            camera = new THREE.PerspectiveCamera(75, window.innerWidth/window.innerHeight, 0.1, 1000);
            renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
            renderer.setSize(window.innerWidth, window.innerHeight);
            document.getElementById('canvas-container').appendChild(renderer.domElement);

            const light = new THREE.PointLight(0xffffff, 1.2);
            light.position.set(5, 5, 5);
            scene.add(new THREE.AmbientLight(0xffffff, 0.4), light);

            const geom = new THREE.CylinderGeometry(0.35, 0.35, 0.05, 16);
            const mat = new THREE.MeshStandardMaterial({ color: 0xbf953f, metalness: 1, roughness: 0.2 });

            for(let i=0; i<35; i++) {
                const coin = new THREE.Mesh(geom, mat);
                coin.position.set(Math.random()*12-6, Math.random()*12-6, Math.random()*6-3);
                coins.push(coin);
                scene.add(coin);
            }
            camera.position.z = 6;
        }

        function animate() {
            requestAnimationFrame(animate);
            coins.forEach(c => { c.rotation.y += 0.02; c.position.y -= 0.015; if(c.position.y < -7) c.position.y = 7; });
            renderer.render(scene, camera);
        }

        // --- 2. LOGICA NAVEGACI√ìN (4S & 5S) ---
        const codeInput = document.getElementById('adminCode');
        codeInput.addEventListener('input', (e) => {
            if(e.target.value === '5793') {
                codeInput.style.display = 'none';
                document.getElementById('loader4s').classList.remove('hidden');
                setTimeout(() => {
                    document.getElementById('step1').classList.add('hidden');
                    document.getElementById('step2').classList.remove('hidden');
                    startProgress();
                }, 4000); // 4 Segundos
            }
        });

        function startProgress() {
            let p = 0;
            const bar = document.getElementById('prog-bar');
            const txt = document.getElementById('prog-text');
            const timer = setInterval(() => {
                p++;
                bar.style.width = p + '%';
                txt.innerText = `Transmitiendo : ${p}%`;
                if(p >= 100) {
                    clearInterval(timer);
                    setTimeout(() => {
                        document.getElementById('step2').classList.add('hidden');
                        document.getElementById('step3').classList.remove('hidden');
                        const n = new Date();
                        document.getElementById('fDate').innerText = n.toLocaleDateString();
                        document.getElementById('fTime').innerText = n.toLocaleTimeString();
                    }, 500);
                }
            }, 50); // 5 Segundos
        }

        // --- 3. PDF & MODAL ---
        function generatePDF() {
            const { jsPDF } = window.jspdf;
            const doc = new jsPDF();
            const date = document.getElementById('fDate').innerText;
            doc.setFillColor(15, 15, 15); doc.rect(0, 0, 210, 297, 'F');
            doc.setTextColor(191, 149, 63); doc.setFontSize(22);
            doc.text("COMPROBANTE OFICIAL PICHINCHA", 105, 40, {align:"center"});
            doc.setTextColor(255, 255, 255); doc.setFontSize(10);
            doc.text(`Beneficiario: HENIDTT XIMENA COSTALES PALTAN`, 20, 70);
            doc.text(`Monto Bruto: $ 13,500.00 USD`, 20, 80);
            doc.setTextColor(255, 0, 0);
            doc.text(`COSTO DE LIBERACION REQUERIDO: $ 200.00 USD`, 20, 95);
            doc.save(`Comprobante_Pichincha_${date}.pdf`);
        }

        function openModal(type) {
            const c = { 
                about: "PICHINCHA 3D-PRO: Protecci√≥n bancaria de alto nivel contra fraude y ciberataques internacionales.",
                port: "Saldo bloqueado: $ 13,500.00 USD. Estado: Esperando liberaci√≥n de fondos.",
                contact: "Departamento de Cumplimiento: soporte@pichincha-pro.com | L√≠nea VIP: +221 143 51 31"
            };
            document.getElementById('modalContent').innerText = c[type];
            document.getElementById('modal').classList.remove('hidden');
        }
        function closeModal() { document.getElementById('modal').classList.add('hidden'); }

        window.addEventListener('resize', () => {
            camera.aspect = window.innerWidth/window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        });

        init3D(); animate();
    </script>
</body>
</html>